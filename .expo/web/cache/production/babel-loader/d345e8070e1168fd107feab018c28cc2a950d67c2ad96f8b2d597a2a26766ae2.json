{"ast":null,"code":"import{runOnUI}from\"../core\";export var prepareUIRegistry=runOnUI(function(){'worklet';var frameCallbackRegistry={frameCallbackRegistry:new Map(),activeFrameCallbacks:new Set(),previousFrameTimestamp:null,runCallbacks:function runCallbacks(){var _this=this;var loop=function loop(timestamp){if(_this.previousFrameTimestamp===null){_this.previousFrameTimestamp=timestamp;}var delta=timestamp-_this.previousFrameTimestamp;_this.activeFrameCallbacks.forEach(function(callbackId){var callbackDetails=_this.frameCallbackRegistry.get(callbackId);var startTime=callbackDetails.startTime;if(startTime===null){callbackDetails.startTime=timestamp;callbackDetails.callback({timestamp:timestamp,timeSincePreviousFrame:null,timeSinceFirstFrame:0});}else{callbackDetails.callback({timestamp:timestamp,timeSincePreviousFrame:delta,timeSinceFirstFrame:timestamp-startTime});}});if(_this.activeFrameCallbacks.size>0){_this.previousFrameTimestamp=timestamp;requestAnimationFrame(loop);}else{_this.previousFrameTimestamp=null;}};if(this.activeFrameCallbacks.size===1){requestAnimationFrame(loop);}},registerFrameCallback:function registerFrameCallback(callback,callbackId){this.frameCallbackRegistry.set(callbackId,{callback:callback,startTime:null});},unregisterFrameCallback:function unregisterFrameCallback(callbackId){this.manageStateFrameCallback(callbackId,false);this.frameCallbackRegistry.delete(callbackId);},manageStateFrameCallback:function manageStateFrameCallback(callbackId,state){if(callbackId===-1){return;}if(state){this.activeFrameCallbacks.add(callbackId);this.runCallbacks();}else{var callback=this.frameCallbackRegistry.get(callbackId);callback.startTime=null;this.activeFrameCallbacks.delete(callbackId);}}};global._frameCallbackRegistry=frameCallbackRegistry;});","map":{"version":3,"names":["runOnUI","prepareUIRegistry","frameCallbackRegistry","Map","activeFrameCallbacks","Set","previousFrameTimestamp","runCallbacks","_this","loop","timestamp","delta","forEach","callbackId","callbackDetails","get","startTime","callback","timeSincePreviousFrame","timeSinceFirstFrame","size","requestAnimationFrame","registerFrameCallback","set","unregisterFrameCallback","manageStateFrameCallback","delete","state","add","global","_frameCallbackRegistry"],"sources":["C:/Riaz/Projects/JK/JK_Frontend/node_modules/react-native-reanimated/lib/reanimated2/frameCallback/FrameCallbackRegistryUI.js"],"sourcesContent":["import { runOnUI } from '../core';\nexport const prepareUIRegistry = runOnUI(() => {\n    'worklet';\n    const frameCallbackRegistry = {\n        frameCallbackRegistry: new Map(),\n        activeFrameCallbacks: new Set(),\n        previousFrameTimestamp: null,\n        runCallbacks() {\n            const loop = (timestamp) => {\n                if (this.previousFrameTimestamp === null) {\n                    this.previousFrameTimestamp = timestamp;\n                }\n                const delta = timestamp - this.previousFrameTimestamp;\n                this.activeFrameCallbacks.forEach((callbackId) => {\n                    const callbackDetails = this.frameCallbackRegistry.get(callbackId);\n                    const { startTime } = callbackDetails;\n                    if (startTime === null) {\n                        // First frame\n                        callbackDetails.startTime = timestamp;\n                        callbackDetails.callback({\n                            timestamp,\n                            timeSincePreviousFrame: null,\n                            timeSinceFirstFrame: 0,\n                        });\n                    }\n                    else {\n                        // Next frame\n                        callbackDetails.callback({\n                            timestamp,\n                            timeSincePreviousFrame: delta,\n                            timeSinceFirstFrame: timestamp - startTime,\n                        });\n                    }\n                });\n                if (this.activeFrameCallbacks.size > 0) {\n                    this.previousFrameTimestamp = timestamp;\n                    requestAnimationFrame(loop);\n                }\n                else {\n                    this.previousFrameTimestamp = null;\n                }\n            };\n            // runCallback() should only be called after registering a callback,\n            // so if there is only one active callback, then it means that there were\n            // zero previously and the loop isn't running yet.\n            if (this.activeFrameCallbacks.size === 1) {\n                requestAnimationFrame(loop);\n            }\n        },\n        registerFrameCallback(callback, callbackId) {\n            this.frameCallbackRegistry.set(callbackId, {\n                callback: callback,\n                startTime: null,\n            });\n        },\n        unregisterFrameCallback(callbackId) {\n            this.manageStateFrameCallback(callbackId, false);\n            this.frameCallbackRegistry.delete(callbackId);\n        },\n        manageStateFrameCallback(callbackId, state) {\n            if (callbackId === -1) {\n                return;\n            }\n            if (state) {\n                this.activeFrameCallbacks.add(callbackId);\n                this.runCallbacks();\n            }\n            else {\n                const callback = this.frameCallbackRegistry.get(callbackId);\n                callback.startTime = null;\n                this.activeFrameCallbacks.delete(callbackId);\n            }\n        },\n    };\n    global._frameCallbackRegistry = frameCallbackRegistry;\n});\n"],"mappings":"AAAA,OAASA,OAAO,eAChB,MAAO,IAAM,CAAAC,iBAAiB,CAAGD,OAAO,CAAC,UAAM,CAC3C,SAAS,CACT,GAAM,CAAAE,qBAAqB,CAAG,CAC1BA,qBAAqB,CAAE,GAAI,CAAAC,GAAG,EAAE,CAChCC,oBAAoB,CAAE,GAAI,CAAAC,GAAG,EAAE,CAC/BC,sBAAsB,CAAE,IAAI,CAC5BC,YAAY,UAAAA,aAAA,CAAG,KAAAC,KAAA,MACX,GAAM,CAAAC,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAIC,SAAS,CAAK,CACxB,GAAIF,KAAI,CAACF,sBAAsB,GAAK,IAAI,CAAE,CACtCE,KAAI,CAACF,sBAAsB,CAAGI,SAAS,CAC3C,CACA,GAAM,CAAAC,KAAK,CAAGD,SAAS,CAAGF,KAAI,CAACF,sBAAsB,CACrDE,KAAI,CAACJ,oBAAoB,CAACQ,OAAO,CAAC,SAACC,UAAU,CAAK,CAC9C,GAAM,CAAAC,eAAe,CAAGN,KAAI,CAACN,qBAAqB,CAACa,GAAG,CAACF,UAAU,CAAC,CAClE,GAAQ,CAAAG,SAAS,CAAKF,eAAe,CAA7BE,SAAS,CACjB,GAAIA,SAAS,GAAK,IAAI,CAAE,CAEpBF,eAAe,CAACE,SAAS,CAAGN,SAAS,CACrCI,eAAe,CAACG,QAAQ,CAAC,CACrBP,SAAS,CAATA,SAAS,CACTQ,sBAAsB,CAAE,IAAI,CAC5BC,mBAAmB,CAAE,CACzB,CAAC,CAAC,CACN,CAAC,IACI,CAEDL,eAAe,CAACG,QAAQ,CAAC,CACrBP,SAAS,CAATA,SAAS,CACTQ,sBAAsB,CAAEP,KAAK,CAC7BQ,mBAAmB,CAAET,SAAS,CAAGM,SACrC,CAAC,CAAC,CACN,CACJ,CAAC,CAAC,CACF,GAAIR,KAAI,CAACJ,oBAAoB,CAACgB,IAAI,CAAG,CAAC,CAAE,CACpCZ,KAAI,CAACF,sBAAsB,CAAGI,SAAS,CACvCW,qBAAqB,CAACZ,IAAI,CAAC,CAC/B,CAAC,IACI,CACDD,KAAI,CAACF,sBAAsB,CAAG,IAAI,CACtC,CACJ,CAAC,CAID,GAAI,IAAI,CAACF,oBAAoB,CAACgB,IAAI,GAAK,CAAC,CAAE,CACtCC,qBAAqB,CAACZ,IAAI,CAAC,CAC/B,CACJ,CAAC,CACDa,qBAAqB,UAAAA,sBAACL,QAAQ,CAAEJ,UAAU,CAAE,CACxC,IAAI,CAACX,qBAAqB,CAACqB,GAAG,CAACV,UAAU,CAAE,CACvCI,QAAQ,CAAEA,QAAQ,CAClBD,SAAS,CAAE,IACf,CAAC,CAAC,CACN,CAAC,CACDQ,uBAAuB,UAAAA,wBAACX,UAAU,CAAE,CAChC,IAAI,CAACY,wBAAwB,CAACZ,UAAU,CAAE,KAAK,CAAC,CAChD,IAAI,CAACX,qBAAqB,CAACwB,MAAM,CAACb,UAAU,CAAC,CACjD,CAAC,CACDY,wBAAwB,UAAAA,yBAACZ,UAAU,CAAEc,KAAK,CAAE,CACxC,GAAId,UAAU,GAAK,CAAC,CAAC,CAAE,CACnB,OACJ,CACA,GAAIc,KAAK,CAAE,CACP,IAAI,CAACvB,oBAAoB,CAACwB,GAAG,CAACf,UAAU,CAAC,CACzC,IAAI,CAACN,YAAY,EAAE,CACvB,CAAC,IACI,CACD,GAAM,CAAAU,QAAQ,CAAG,IAAI,CAACf,qBAAqB,CAACa,GAAG,CAACF,UAAU,CAAC,CAC3DI,QAAQ,CAACD,SAAS,CAAG,IAAI,CACzB,IAAI,CAACZ,oBAAoB,CAACsB,MAAM,CAACb,UAAU,CAAC,CAChD,CACJ,CACJ,CAAC,CACDgB,MAAM,CAACC,sBAAsB,CAAG5B,qBAAqB,CACzD,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}