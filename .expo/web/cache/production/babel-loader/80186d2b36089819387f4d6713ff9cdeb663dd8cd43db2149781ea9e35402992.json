{"ast":null,"code":"\"use strict\";var _classCallCheck=require(\"@babel/runtime/helpers/classCallCheck\");var _createClass=require(\"@babel/runtime/helpers/createClass\");var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||(\"get\"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function get(){return m[k];}};}Object.defineProperty(o,k2,desc);}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};Object.defineProperty(exports,\"__esModule\",{value:true});exports.LogBoxLog=void 0;var LogBoxSymbolication=__importStar(require(\"./LogBoxSymbolication\"));function componentStackToStack(componentStack){return componentStack.map(function(stack){var _a,_b,_c,_d;return{file:stack.fileName,methodName:stack.content,lineNumber:(_b=(_a=stack.location)===null||_a===void 0?void 0:_a.row)!==null&&_b!==void 0?_b:0,column:(_d=(_c=stack.location)===null||_c===void 0?void 0:_c.column)!==null&&_d!==void 0?_d:0,arguments:[]};});}var LogBoxLog=function(){function LogBoxLog(data){_classCallCheck(this,LogBoxLog);var _a;this.symbolicated={stack:{error:null,stack:null,status:\"NONE\"},component:{error:null,stack:null,status:\"NONE\"}};this.componentStackCache=null;this.level=data.level;this.type=(_a=data.type)!==null&&_a!==void 0?_a:\"error\";this.message=data.message;this.stack=data.stack;this.category=data.category;this.componentStack=data.componentStack;this.codeFrame=data.codeFrame;this.isComponentError=data.isComponentError;this.count=1;}_createClass(LogBoxLog,[{key:\"incrementCount\",value:function incrementCount(){this.count+=1;}},{key:\"getAvailableStack\",value:function getAvailableStack(type){if(this.symbolicated[type].status===\"COMPLETE\"){return this.symbolicated[type].stack;}return this.getStack(type);}},{key:\"retrySymbolicate\",value:function retrySymbolicate(type,callback){if(this.symbolicated[type].status!==\"COMPLETE\"){LogBoxSymbolication.deleteStack(this.getStack(type));this.handleSymbolicate(type,callback);}}},{key:\"symbolicate\",value:function symbolicate(type,callback){if(this.symbolicated[type].status===\"NONE\"){this.handleSymbolicate(type,callback);}}},{key:\"getStack\",value:function getStack(type){if(type===\"component\"){if(this.componentStackCache==null){this.componentStackCache=componentStackToStack(this.componentStack);}return this.componentStackCache;}return this.stack;}},{key:\"handleSymbolicate\",value:function handleSymbolicate(type,callback){var _this=this;var _a;if(type===\"component\"&&!((_a=this.componentStack)===null||_a===void 0?void 0:_a.length)){return;}if(this.symbolicated[type].status!==\"PENDING\"){this.updateStatus(type,null,null,null,callback);LogBoxSymbolication.symbolicate(this.getStack(type)).then(function(data){_this.updateStatus(type,null,data===null||data===void 0?void 0:data.stack,data===null||data===void 0?void 0:data.codeFrame,callback);},function(error){_this.updateStatus(type,error,null,null,callback);});}}},{key:\"updateStatus\",value:function updateStatus(type,error,stack,codeFrame,callback){var lastStatus=this.symbolicated[type].status;if(error!=null){this.symbolicated[type]={error:error,stack:null,status:\"FAILED\"};}else if(stack!=null){if(codeFrame){this.codeFrame=codeFrame;}this.symbolicated[type]={error:null,stack:stack,status:\"COMPLETE\"};}else{this.symbolicated[type]={error:null,stack:null,status:\"PENDING\"};}if(callback&&lastStatus!==this.symbolicated[type].status){callback(this.symbolicated[type].status);}}}]);return LogBoxLog;}();exports.LogBoxLog=LogBoxLog;","map":{"version":3,"names":["LogBoxSymbolication","__importStar","require","componentStackToStack","componentStack","map","stack","file","fileName","methodName","content","lineNumber","_b","_a","location","row","column","_d","_c","arguments","LogBoxLog","data","_classCallCheck","symbolicated","error","status","component","componentStackCache","level","type","message","category","codeFrame","isComponentError","count","_createClass","key","value","incrementCount","getAvailableStack","getStack","retrySymbolicate","callback","deleteStack","handleSymbolicate","symbolicate","_this","length","updateStatus","then","lastStatus","exports"],"sources":["C:\\Riaz\\Projects\\JK\\JK_Frontend\\node_modules\\@expo\\metro-runtime\\src\\error-overlay\\Data\\LogBoxLog.ts"],"sourcesContent":["/**\n * Copyright (c) Evan Bacon.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport * as LogBoxSymbolication from \"./LogBoxSymbolication\";\nimport type { Stack } from \"./LogBoxSymbolication\";\nimport type {\n  Category,\n  Message,\n  ComponentStack,\n  CodeFrame,\n} from \"./parseLogBoxLog\";\n\ntype SymbolicationStatus = \"NONE\" | \"PENDING\" | \"COMPLETE\" | \"FAILED\";\n\nexport type LogLevel = \"warn\" | \"error\" | \"fatal\" | \"syntax\";\n\nexport type LogBoxLogData = {\n  level: LogLevel;\n  type?: string;\n  message: Message;\n  stack: Stack;\n  category: string;\n  componentStack: ComponentStack;\n  codeFrame?: CodeFrame;\n  isComponentError: boolean;\n};\n\nexport type StackType = \"stack\" | \"component\";\n\nfunction componentStackToStack(componentStack: ComponentStack): Stack {\n  return componentStack.map((stack) => ({\n    file: stack.fileName,\n    methodName: stack.content,\n    lineNumber: stack.location?.row ?? 0,\n    column: stack.location?.column ?? 0,\n    arguments: [],\n  }));\n}\n\nexport class LogBoxLog {\n  message: Message;\n  type: string;\n  category: Category;\n  componentStack: ComponentStack;\n  stack: Stack;\n  count: number;\n  level: LogLevel;\n  codeFrame?: CodeFrame;\n  isComponentError: boolean;\n  symbolicated: Record<\n    StackType,\n    | { error: null; stack: null; status: \"NONE\" }\n    | { error: null; stack: null; status: \"PENDING\" }\n    | { error: null; stack: Stack; status: \"COMPLETE\" }\n    | { error: Error; stack: null; status: \"FAILED\" }\n  > = {\n    stack: {\n      error: null,\n      stack: null,\n      status: \"NONE\",\n    },\n    component: {\n      error: null,\n      stack: null,\n      status: \"NONE\",\n    },\n  };\n\n  constructor(data: LogBoxLogData) {\n    this.level = data.level;\n    this.type = data.type ?? \"error\";\n    this.message = data.message;\n    this.stack = data.stack;\n    this.category = data.category;\n    this.componentStack = data.componentStack;\n    this.codeFrame = data.codeFrame;\n    this.isComponentError = data.isComponentError;\n    this.count = 1;\n  }\n\n  incrementCount(): void {\n    this.count += 1;\n  }\n\n  getAvailableStack(type: StackType): Stack | null {\n    if (this.symbolicated[type].status === \"COMPLETE\") {\n      return this.symbolicated[type].stack;\n    }\n    return this.getStack(type);\n  }\n\n  retrySymbolicate(\n    type: StackType,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    if (this.symbolicated[type].status !== \"COMPLETE\") {\n      LogBoxSymbolication.deleteStack(this.getStack(type));\n      this.handleSymbolicate(type, callback);\n    }\n  }\n\n  symbolicate(\n    type: StackType,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    if (this.symbolicated[type].status === \"NONE\") {\n      this.handleSymbolicate(type, callback);\n    }\n  }\n\n  private componentStackCache: Stack | null = null;\n\n  private getStack(type: StackType): Stack {\n    if (type === \"component\") {\n      if (this.componentStackCache == null) {\n        this.componentStackCache = componentStackToStack(this.componentStack);\n      }\n      return this.componentStackCache;\n    }\n    return this.stack;\n  }\n\n  private handleSymbolicate(\n    type: StackType,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    if (type === \"component\" && !this.componentStack?.length) {\n      return;\n    }\n\n    if (this.symbolicated[type].status !== \"PENDING\") {\n      this.updateStatus(type, null, null, null, callback);\n      LogBoxSymbolication.symbolicate(this.getStack(type)).then(\n        (data) => {\n          this.updateStatus(type, null, data?.stack, data?.codeFrame, callback);\n        },\n        (error) => {\n          this.updateStatus(type, error, null, null, callback);\n        }\n      );\n    }\n  }\n\n  private updateStatus(\n    type: StackType,\n    error?: Error | null,\n    stack?: Stack | null,\n    codeFrame?: CodeFrame | null,\n    callback?: (status: SymbolicationStatus) => void\n  ): void {\n    const lastStatus = this.symbolicated[type].status;\n    if (error != null) {\n      this.symbolicated[type] = {\n        error,\n        stack: null,\n        status: \"FAILED\",\n      };\n    } else if (stack != null) {\n      if (codeFrame) {\n        this.codeFrame = codeFrame;\n      }\n\n      this.symbolicated[type] = {\n        error: null,\n        stack,\n        status: \"COMPLETE\",\n      };\n    } else {\n      this.symbolicated[type] = {\n        error: null,\n        stack: null,\n        status: \"PENDING\",\n      };\n    }\n\n    if (callback && lastStatus !== this.symbolicated[type].status) {\n      callback(this.symbolicated[type].status);\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}